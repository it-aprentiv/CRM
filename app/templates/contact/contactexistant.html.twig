{% extends 'base.html.twig' %}
<table class="table table-sm mb-0 table-striped list-filter">
        <thead>
            <tr class="bg-info text-light">
                <th>Entité</th>
                <th>Statut</th>
                <th>Societe</th>
                <th>Interlocuteur</th>
                <th>Adresse</th>
                <th>Ville</th>
                <th>Code postale</th>
                <th>Téléphone</th>
                <th>Email</th>
                <th>OPCO</th>
                <th>Cial</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {#{% for contact in pagination %}
                
                <tr data-clientprospect-id="{{ contact.contact_id }}" data-href="{{ path('Fiche_client_prospect_Controller/editClient', { id : contact.contact_id} ) }}">
                    {{ form_start(contact_forme[contact.contact_id]) }}
                    <td>{{ form_widget(contact_forme[contact.contact_id].structure) }}</td>
                    <td>{{ contact.statut }}</td>
                    <td>{{ contact.societe }}</td>
                    <td>{{ contact.nom | ucwords}} {{ contact.prenom | ucwords }}</td>
                    <td>{{ contact.adresse }}</td>
                    <td>{{ contact.ville }}</td>
                    <td>{{ contact.codePostal }}</td>
                    <td>{{ contact.telephone }}</td>
                    <td>{{ contact.email}}</td>
                    <td>{{ contact.opca }}</td>
                     {% if app.user == "MUNIER Pascal" or app.user == "Soler Jérémy" or app.user == "OUAHABI Abdulah" %}
                    <td>    {{ form_widget(contact_forme[contact.contact_id].id_commercial, { attr: { 'class' : 'w-100', placeholder : '-- Commercial --'} }) }}</td>
                    {% else %}
                    <td>    {{ form_widget(contact_forme[contact.contact_id].id_commercial, { attr: { 'class' : 'w-100', placeholder : '-- Commercial --', disabled:true} }) }}</td>
                    {% endif %}
                    <td>

                        {% if can_view is defined and can_view %}
                        <a href="{{ path('Fiche_client_prospect_Controller/editClient', { id : contact.contact_id} ) }}">
                            <i class="fas fa-eye fa-2x"  style="margin-right: 10px;"></i>
                        </a>
                        {% endif %}
                        {% if can_edit is defined and can_edit %}
                        <a onClick="deleteClientProspect($(this))">
                            <i class="fas fa-trash-alt text-danger fa-2x"></i>
                        </a>
                        {% endif %}
                    </td>
                {{ form_end(contact_forme[contact.contact_id]) }}
                </tr>
                

            {% endfor %}
        </tbody>

        <tfoot>
            <tr >
                <td colspan="6" class="text-align-middle pt-3">
                    <strong>Total : </strong> {{ pagination.getTotalItemCount }}
                </td>
                <td colspan="6" class="text-align-middle pt-3">
                    {{ knp_pagination_render(pagination) }}
                </td>
            </tr>
        </tfoot>
    </table>#}