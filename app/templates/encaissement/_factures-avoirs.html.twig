{% if facture %}
    
    {% set montantTTC = null %}
    {% set factureId = null %}
    {% set factureRef = null %}
    
    {# Ajout gestion dom/loc   #}
    {% if context is defined and context == 'dom/loc' %}
        {% set montantTTC = facture.ttc ? facture.ttc : facture.montant %}
        {% set factureId = facture.idfacturedom %}
        {% set factureRef = facture.numero %}
    {% else %}
        {% set montantTTC = facture.mntTtc ? facture.mntTtc : facture.totalRegle %}
        {% set factureId = facture.id %}
        {% set factureRef = facture.ref %}
    {% endif %}

    {% if deletable is not defined %}
        {% set deletable = true %}
    {% endif %}
    
    <fieldset class="facture-item position-relative">
        <input type="hidden" class="id_fact" value="{{ factureId }}">
        <legend class="col-form-label"><i class="fas fa-list-alt" aria-hidden="true"></i></legend>

        {% if deletable %}
        <a href="javascript:void(0)" class="remove-facture-liee text-danger position-absolute" title="Supprimer la facture">
            <i class="fas fa-trash-alt"></i>
        </a>
        {% endif %}

        <div class="form-row">
            <div class="form-group col-md-6">
                <label class="required">Num facture</label>
                <input type="text" disabled="disabled" class="form-control" value="{{ factureRef }}">
            </div>
            <div class="form-group col-md-6">
                <label class="required">Montant TTC</label>
                <div class="input-group">
                    <input type="text" disabled="disabled" class="form-control montantttcfacture" value="{{ montantTTC | number_format(2, ',', ' ') }}">
                    <div class="input-group-append">
                        <span class="input-group-text"> €</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-row">
            {% if facture.num_avoir is defined and facture.num_avoir %}
                {% set avoirLabelClass = 'required' %}
            {% else %}
                {% set avoirLabelClass = '' %}
            {% endif %}
            <div class="form-group col-md-6">
                <label {% if avoirLabelClass %}class="{{ avoirLabelClass }}"{% endif %}>Num avoir</label>
                <input type="text" disabled="disabled" class="form-control" value="{{ facture.num_avoir is defined and facture.num_avoir ? facture.num_avoir : "--" }}">
            </div>
            <div class="form-group col-md-6">
                <label {% if avoirLabelClass %}class="{{ avoirLabelClass }}"{% endif %}>Montant TTC</label>
                <div class="input-group">
                    <input type="text" disabled="disabled" class="form-control" id="montant-ttc-avoir" value="{{ facture.num_avoir is defined and facture.num_avoir ? facture.avoirMontantTTC  | number_format(2, ',', ' ') : "--" }}">
                    <div class="input-group-append">
                        <span class="input-group-text"> €</span>
                    </div>
                </div>
            </div>
        </div>
        <p>
            <input type="hidden" name="factureLieesIds[]" value="{{ factureId }}" />
        </p>
    </fieldset>

{% endif %}